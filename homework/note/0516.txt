*응답
forward 부분에서 확장


						오라클서버
ㅁ			ㅁ			ㅇ
memerlist.jsp		MemberServlet		DB
이 페이지에서만 응답에 대한 출력을 하는지
			 서블릿을 경유하는지		
		+jsp와 서블릿 사이에 대한 유지의 문제

		유지하면 떠올려야할 것 → Scope

*scope에는 4가지가 있음

1.page(page context)
그 페이지에서만 유지가 된다
└→4번과 함께 1번도 잊어도 됨
모바일 특성 상 화면이 계속 바뀜(안드로이드 쪽에서 activate)

2.request ★ 								┐
그냥 자바랑 다른 점  							│
자바에는 scope가 없었는데 web에 오면 scope에 대해서 생각해야함		│
									│
3.session ★								│
변수의 완결편이라고 이야기 했던 쿠키와 세션 중 세션			┘★스프링에서도 2가지만 지원함

4.application
서버를 끄기 전까지 죽지 않음
서버입장에서 부담스러움
초당 3~4천명도 들어올 수 있음 ┐
인스턴스화가 기하급수적으로 늘어나면 서버가 다운되기 때문에 잊어도 됨


오늘은 2번에 대해서 집중적으로 배움 아래와 관계있음
[sendRedirect]
(요청)→ㅁ(a.jsp)→ㅁ(b.jsp)
	1.
	2.
	3.
	redirect (url 변경됨)		url:위치 → 톰캣이 가리키는 물리적인 위치 (D드라이브\workspace_jsp)
	4.(redirect로 인해서 실행되지 못함)		url을 강조하는 이유 pojo 1-1, 1-2, 1-3 순차적으로 수업 → 스프링

[forward(유지)]
자바-재사용성
a.jsp가 갖고 있는 것을 b.jsp에서도 사용하게 하려면
└→ 잘 몰라도 forward를 사용할 것
(※redirect와 다르게 url 변경X)
						(참고 : 스프링에서 intercept)
jsp - jsp (X)
Servlet - jsp (◎)
서블릿 뒤에는 자바 자바 뒤에는 오라클(DB)이 있음


☆오늘의 핵심☆
forward = SELECT(DML) : 로그인, 배송조회, 주문조회 등 	|서블릿을 경유하지않는 jsp는 동작하지않음(SELECT를 안해서)|
(DDL : 테이블 만들기, DML,:입력 조회,수정,삭제, DCL:권한주기)
-------------------------------------------------------------------------------
JDBC API
재사용성이 떨어짐 / 회사가면 사용 안 함
실용 → MyBatis, Hibernate(JPA, SQL없이 사용 추상적이라 힘듬, 직관적 X)
MyBatis 까지 하신다고 함 
-------------------------------------------------------------------------------
─────────────────────────────────────────────────────────

~토드다운 ~

오라클서버 접속하는 방법
CMD
sqlplus scott/tiger@172.16.2.8
SQL> show user
USER is "SCOTT"
SQL> select * from tab;

타인ip 접속시 listner 에러 발생 시 
작업관리자>서비스>OracleServiceORCL OracleServiceXE (SID = ORCL, XE)
오라클 서버 2개 설치 되어 있면 안됨
XE만 실행
Oracle default 포트번호 1521 (변경가능)
포트번호 ≒ 대문 / 1~657xx 중 운영체제가 1~1023까지 보통 사용함
선점된 포트번호는 다른 서비스에서는 사용할 수 없음
현재 사용하는 Tomcat Servr 9000

~토드설치 ~
11.5 압축풀기
exe 관리자 권한으로 실행 (오라클 서버에 접속하기 위한 도구 / sqlplus)
맨위에거 필수설치, 4번째거 +에러나는거 다 체크박스 해제

토드를 사용하려면 엑셀 - Oracle 32bit 다운로드

─────────────────────────────────────────────────────────
*Repeat 페이지이동
sendRedirect 	  |	 forward

	a.jsp		b.jsp

요청을 받아주는 쪽의 확장자가
jsp가 아닌 Servlet이 되면
MVC패턴을 생각

sendRediect로 페이지 a→b가 되면
a로의 요청은 끊어짐, 상태가 유지되지 않음-stateless /forward에서는 요청 유지됨 
			└URL이 변경 됨
기존의 요청이 화면에 남아있는것? => 실시간 정보가 아님(동기화)

jsp 스크립틀릿 <% %>이 안에만 자바코드를 쓸 수 있다
<% 인스턴스화 : A a = new A(); → 객체 생성 → 램에 올라감 %>
		메모리(Ram) 구조
		stack	|   Heap
       지역변수(자동회수)	| 클래스, 전역변수
			  '인스턴스 화 해야 누릴수 있다'
풍선							      ┌람다식? 함수가 트렌드
끈 a : 주소번지 @abcd1234(16진수) | 풍선 A (field, method(함수))

누릴수있다 → a에서만
b에서도 누리고 싶으면 해야하는게 forward
----------------------------------------------------------
forward를 제대로 사용하기 위해서 DB 연동 (SELECT)
Servlet과 jsp 비벼보기 / MVC패턴 

엑셀 - 회원관리 실습
package com.util / DBConnectionMgr class생성 > 공통 코드 다른 클래스에서 가져다 쓰려고 생성 main 필요X
basic0512\src\main\webapp\WEB-INF\lib > ojdbc6.jar 복붙


------------------------
설명-DB연동하는 4단계
1) Driver Class 로딩한다 
2) 물리적으로 떨어져 있는 오라클 서버와 연결통로를 확보해야한다. 
실제 코드는 Connection 이라는 Interface(사용하는 제품이 다르기 때문에 추상 메서드/ 결정되지 않은 상태)
(jdbc api -> 클래스, 추상클래스, 인터페이스)

Connection을 위해 필요한 것
URL 포트번호
user(scott) pw(tiger) 집합적 사고-둘다일치해야함 → Connection 연결

3)SELECT문을 ORACLE 서버까지 가져가야함
가져가줄 Interface가 필요함 Statement/PreparedStatement // CRUD(***필수***) 8시간 안에 되도록 이거만 공부해야될 정도로 중요함	
4)ResultSet - n건
Select와 연관된 API - List<Map> 컬럼은 map, row는 list (고정값x) , list는 인터페이스, 구현체 클래스가 필요함 <백터, 어레이리스트> 인스턴스화 
											     벡터-멀티스레드에 안전  |	싱글스레드에 안전 
												(카카오톡)

테이블에 커서라는 애가 살고 있는데 맨 위에 가있어
커서가 있는 위치에서 데이터 있 없? 묻고 다음행으로 넘어갈때
rs.next()
------------------------
계정 정보 5회 이상 잘못 요청 잠겼을 때
C:\Users\GDJ>sqlplus "/as sysdba"
(계정 생성, 삭제, 권한주기)
SQL> alter user scott identified by tiger; - 비번변경
SQL> alter user scott account unlock; - 언락풀기

----------------------------------------------------------

요청 				→ MemberServlet 					→ MemberDao 

			  (어노테이션) ("url:경로(상대경로가 좋음)")
e	 → URL	 	→ @WebServlet("(업무폴더이름)/(요청,기능이름)")	
			   @WebServlet("member/memberList")		
			   @Controller라는 어노테이션이 스프링에 있음
			  +@RequestMapping 합쳐놓은 것 
			브라우저에서 요청할 수 있음 단위테스트는 doget만 가능
(default)get→링크 		doGet 오타내면 405 
				doPost 단위테스트 안됨 → Postman/js로 테스트 가능
							
								
									브라우저 url에    @WebServlet("member/memberList") 이걸 적으면
									doGet이 호출 됨 / cf.클라우드 서비스를 제대로 하려면 callback이 중요함
									누가누구를 원하는가 (인스턴스화, 호출)
									Servlet과 MemberDao 
									MemberServlet클래스 안에서 MemberDao클래스가 구현하고 있는 선언된 MemberList를 호출해야함
									
									
①크롬
②http://172.16.2.19:9000/업무폴더명/
③MemberServlet(req,res)
		저장소,
key로 값을 담을 수 있음
scope개념 반복

업무폴더명 앞까지는 Tomcat이 알고 있음									
URL을 호출 → Servlet이 받음


forward : servlet과 jsp 사이의 이동을 유지/ SELECT와의 관계
list의 주소번지를 불러올 수 있음
List<Map> map에 컬럼들에 해당하는 정보를 담아
요청을 유지시켜 조회할 수 있음
									

									

									

									

									
									

									
									

									
									


