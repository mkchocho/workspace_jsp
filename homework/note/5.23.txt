5.23

회원관리 구현 - 실습

java > servlet > jsp

jsp - 정적페이지(html, css, js)와 동적페이지(java-서버사이드에서 결정됨)가 공존한다
-서버측에서 결정되고 그 결과가 화면에 다운로드 된다

회원목록 보기, 조건검색 구현
select문
ResultSet - 커서를 조작할 수 있는 메서드를 제공해 주기 때문
rs.next();: 리턴타입이 boolean - ResultSet -> java api document문서를 보면

forward로 이동하기 
: 요청이 유지되는 동안
: scope - request역할, 할 수 있는 것, 저장소
: url은 바뀌지 않는데 출력 결과 페이지는 변했다 -> a.jsp를 가리키고 있는데 실제 출력되는 페이지는 b.jsp이다

jdbc api -> myBatis API(QRM솔루션, SQL매핑오픈소스) -> MVC패턴 반영 -> spring(maven, gradle)

action(서블릿-자바포함 -> MVC패턴) -> jsp 

기능을 구현하는데 있어서 패턴화를 시켜본다
ex) 회원가입 구현 - jsp(view계층=모달창(창+레이어)-팝업창(창+창)) -> action(insert) -> action(select) -> jsp(view계층-본체)
: Modal(jsp 한 페이지에 두 개의 화면이 존재(1.목록 2.입력창))
memberList.jsp 안에 목록보기 화면과 회원가입 화면이 둘 존재한다(하나는 버튼을 눌렀을 때만 작동) - 두 개는 다름

가입(insert)에 성공하면 1(int)을 반환(오라클 서버에서)하고
int result = pstmt.executeUpadate(); // 요청 메서드 

ResultSet re = pstmt.executeQuery(); // 조회 메서드
인터페이스이면서 추상메서드로 next와 같은 커서를 움직이는 메서드 제공하는 것

MyBatis로 가면 이 코드들을 못보게 됨
왜냐하면 반복되는 코드를 줄여주는 컨셉이므로 생략하게 됨

int / boolean(흐름을 바꿔줌: 순서[알고리즘]가 달라질 수 있다) / double
전변과 지변의 차이점 기억하기
원시형 변수 - 호출하면 값이 반환된다
참조횽 변수 - 호출하면 주소번지가 반환된다

#은 유니크하다는 의미, MyBais에서는 select(id, map이나 list) 파라미터 값이 두 개, 첫 번째는 id, name 등, 두 번째는 select한 list나 map


button / input 차이
버튼 태그는 서브밋(클라이언트에서 서버로 전송)이 자동으로 일어남
인풋은 따로 서브밋을 해줘야 홈태그 안에 있는게 전송 됨(서브밋 메서드를 호출해줘야 홈태그 안에 있는 데이터들이 서버에 전송 됨)


트러블 슈팅(오류 점검)
점검 사항
1. 서블릿에서 if문을 제대로 타고 있는지?
 else if("memberInsert".equals(pMap.get("method").toSting())) {
   // 여기를 경유하는지
}
2. 주소창에서 /member/memberCRUD?method=memberInsert&member_id=apple&mem_pw=123&mem_name=사과

3. MemberDao 클래스의 memberInsert() 경유햇나? - 실제 오라클서버와 연동하기
: logger.info("memberInsert 호출 성공");

4. SQLException인가 아니면 Exception인가?
: logger.info(se.toString()); // DML -> executeUpdate(); 
원인 1. TNS Listner ~~, NetWork Adapter~~ -> 오라클 서버가 정상이 아님
해결 1. 작업관리자 -> 서비스 -> OracleServiceORCL11, ~~11homeListner -> 실행
만일 서버를 정상화 시킬 수 없다면, 다른 사람의 서버를 바라보고 테스트 하기

원인 2. SELECT seq_member0518.nextval FROM dual; 에러 
PK의 특징: not null(null값 들어올 수 없음), nuique(유일무이), 무결성 제약조건
해결 2. 시퀀스 이름에 오타가 있을 때

원인 3. INSERT INTO 테이블명(컬럼명1, 컬러명2, 컬럼명3...) VALUES(?,?,?...)
해결 3. pstmt.setString(1, "") / ? 갯수 만큼 치환되는 값이 있어야 함

추신
get방식과 post방식
get방식의 경우에는 브라우저에게 인터셉트 당할 수 있음
이전에 한 번이라도 요청한 적이 있는 URL인 경우에 서버까지 전달하지 않고서 
브라우저 캐쉬에 남아(기억)있는 페이지 정보를 그대로 내보내 준다
실제로 서버를 경유한 게 아니다
동기화가 되어 있지 않다는 의미
: 서로 맞춘다 
: 동기화(<->비동기화)가 되어 있어야 리얼(교통상황-5분전)이다
: 현재의 정보이다
post방식은 데이터(파라미터)가 포장되어 있어서 인터셉트 할 수 없다


sql
constraints: 제약조건을 추가하겠다는 뜻
pk는 인덱스를 자동으로 만들어 줌

데이터 테이블에 적용하는 방법 - database(위에) -> import -> import table data
스타트 row 설정 -> 자동 정렬 설정 -> commit mode 설정